{"ast":null,"code":"var _jsxFileName = \"F:\\\\Assessment\\\\client\\\\chat-app\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { Link } from \"react-router-dom\";\nimport './style.css';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleValidation = () => {\n      let errors = {};\n      let formIsValid = true; //Password\n\n      if (!this.state.password) {\n        formIsValid = false;\n        errors[\"password\"] = \"Cannot be empty\";\n      } //Email\n\n\n      if (!this.state.email) {\n        formIsValid = false;\n        errors[\"email\"] = \"Cannot be empty\";\n      }\n\n      if (this.state.email && typeof this.state.email !== \"undefined\") {\n        let lastAtPos = this.state.email.lastIndexOf('@');\n        let lastDotPos = this.state.email.lastIndexOf('.');\n\n        if (!(lastAtPos < lastDotPos && lastAtPos > 0 && this.state.email.indexOf('@@') === -1 && lastDotPos > 2 && this.state.email.length - lastDotPos > 2)) {\n          formIsValid = false;\n          errors[\"email\"] = \"Email is not valid\";\n        }\n      }\n\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n    };\n\n    this.login = e => {\n      e.preventDefault();\n\n      if (this.handleValidation()) {\n        Axios({\n          method: \"POST\",\n          data: {\n            email: this.state.email,\n            password: this.state.password\n          },\n          withCredentials: true,\n          url: \"http://localhost:5000/users/login\"\n        }).then(res => {\n          console.log(res);\n\n          if (res.data.status === 200) {\n            localStorage.setItem('token', res.data.token);\n            this.props.handleResponse(res.data);\n            this.props.history.push(\"/users/dashboard\");\n          } else {\n            console.log(\"There is an error\");\n          }\n\n          this.setState({\n            data: res.data\n          }); // this.handleResponse();\n        });\n      } else {\n        alert(\"Form has errors.\");\n      }\n    };\n\n    this.state = {\n      password: \"\",\n      email: \"\",\n      errors: {},\n      data: \"\",\n      token: localStorage.getItem(\"token\")\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"base-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 35\n      }\n    }, \"User Login\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.value,\n      type: \"email\",\n      className: \"form-control\",\n      name: \"email\",\n      placeholder: \"Enter email\",\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, this.state.errors[\"email\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      name: \"password\",\n      placeholder: \"Password\",\n      value: this.state.value,\n      onChange: this.handleChange.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, this.state.errors[\"password\"]))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sign-up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"Not a User?\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 19\n      }\n    }, \"Sign up\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.login.bind(this),\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, \"Login\"))))));\n  }\n\n}\n;","map":{"version":3,"sources":["F:/Assessment/client/chat-app/src/components/Login.js"],"names":["React","Component","Axios","Link","Login","constructor","props","handleValidation","errors","formIsValid","state","password","email","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","setState","login","e","preventDefault","method","data","withCredentials","url","then","res","console","log","status","localStorage","setItem","token","handleResponse","history","push","alert","getItem","handleChange","bind","target","name","value","render","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Axios from 'axios'\r\nimport {\r\n     Link,\r\n} from \"react-router-dom\";\r\nimport './style.css'\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n  \r\n    this.state = {\r\n      password: \"\",\r\n      email: \"\",\r\n      errors: {},\r\n     data: \"\",\r\n     token:localStorage.getItem(\"token\"),\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n  };\r\n  handleChange(e){         \r\n    this.setState({ [e.target.name] : e.target.value });   \r\n}\r\n  \r\n handleValidation = () => {\r\n  let errors = {};\r\n  let formIsValid = true;\r\n //Password\r\n if(!this.state.password){\r\n  formIsValid = false;\r\n  errors[\"password\"] = \"Cannot be empty\";\r\n}\r\n\r\n\r\n  //Email\r\n  if(!this.state.email){\r\n     formIsValid = false;\r\n     errors[\"email\"] = \"Cannot be empty\";\r\n  }\r\n\r\n  if(this.state.email && typeof this.state.email !== \"undefined\"){\r\n     let lastAtPos = this.state.email.lastIndexOf('@');\r\n     let lastDotPos = this.state.email.lastIndexOf('.');\r\n\r\n     if (!(lastAtPos < lastDotPos && lastAtPos > 0 && this.state.email.indexOf('@@') === -1 && lastDotPos > 2 && (this.state.email.length - lastDotPos) > 2)) {\r\n        formIsValid = false;\r\n        errors[\"email\"] = \"Email is not valid\";\r\n      }\r\n }  \r\n this.setState({errors: errors});\r\n return formIsValid;\r\n};\r\n\r\n\r\n login = (e) => {\r\n  e.preventDefault();\r\n  if(this.handleValidation()){\r\n  Axios({\r\n    method: \"POST\",\r\n    data: {\r\n      email: this.state.email,\r\n      password: this.state.password,\r\n    },\r\n    withCredentials: true,\r\n    url: \"http://localhost:5000/users/login\",\r\n  }).then((res) =>{\r\n    console.log(res)\r\n    if(res.data.status === 200){\r\n      localStorage.setItem('token',res.data.token)\r\n      this.props.handleResponse(res.data);\r\n      this.props.history.push(\"/users/dashboard\");\r\n    }\r\n    else{\r\n      console.log(\"There is an error\")\r\n    }\r\n    this.setState({data: res.data})\r\n\r\n   // this.handleResponse();\r\n\r\n  });\r\n  \r\n}else{\r\n  alert(\"Form has errors.\")\r\n}\r\n };\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"body-container\">\r\n        <div className=\"base-container\">\r\n          <div className=\"header\"><b>User Login</b></div>\r\n          <div className=\"content\">\r\n            <form >\r\n            <div className=\"form\">\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"email\">Email</label>\r\n                <input \r\n                value={this.state.value}\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  name=\"email\"\r\n                  placeholder=\"Enter email\"\r\n                  onChange={this.handleChange.bind(this)}                  />\r\n              <span style={{color: \"red\"}}>{this.state.errors[\"email\"]}</span>\r\n\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input\r\n                   type=\"password\"\r\n                   className=\"form-control\"\r\n                   name=\"password\"\r\n                   placeholder=\"Password\"\r\n                   value={this.state.value}\r\n                   onChange={this.handleChange.bind(this)\r\n                   }                  />\r\n                    <span style={{color: \"red\"}}>{this.state.errors[\"password\"]}</span>\r\n\r\n              </div>\r\n            </div>\r\n           \r\n              <p className=\"sign-up\">\r\n                Not a User?\r\n                <a href=\"register\">\r\n                  <Link to=\"/register\">Sign up</Link>\r\n                </a>\r\n              </p>          \r\n          <div className=\"footer\">\r\n            <button type=\"submit\" onClick={this.login.bind(this)} className=\"btn\">\r\n              Login\r\n            </button>\r\n          </div>\r\n     </form>\r\n     </div>\r\n     </div>\r\n</div>\r\n )}};\r\n   \r\n\r\n"]},"metadata":{},"sourceType":"module"}